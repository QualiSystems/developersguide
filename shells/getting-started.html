<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>CloudShell Developer Guide : Getting Started</title>
        <meta name="description" content="">
        <link rel="shortcut icon" type="image/png" href="/devguide/favicon.png?">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/devguide/css/main.css">
        <link rel="stylesheet" href="/devguide/css/prism.css">
        <link rel="stylesheet" href="/devguide/css/samples.css">
        <link rel="stylesheet" href="/devguide/css/normalize.css">
        <link rel="stylesheet" href="/devguide/css/test-hot-block.webflow.css">


        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <script src="/devguide/js/jquery-3.1.0.min.js"></script>
        <script src="/devguide/js/modernizr.js"></script>
        <script src="/devguide/js/webflow.js"></script>


        
    </head>
    <body>
        <div id="header">
            <div class="container">
                <div class="row">
    <div class="col-md-3 col-sm-4">
        <a class="brand" href="/devguide/">
            <img alt="CloudShell Logo" src="/devguide/assets/logo.png" />
            CloudShell <small>Developer Guide</small>
        </a>
    </div>
    <div class="col-md-9 col-sm-8">
        <form class="search" action="/devguide/search.html">
            <input class="input" id="search-query" type="text" name="q" placeholder="Search" />
            <input class="button" type="submit" value="Search"></input>
        </form>
    </div>
</div>

            </div>
        </div>
        <div class="container">
            <div class="row">
                
                
                    <div id="navigation" class="col-md-3 col-sm-4">
                        <ul class="nav nav-list">
     
     
        <li class="nav-header"></li>
        
        
        
     
        <li class="nav-header">Introduction</li>
        
                <li data-page-id="index.md"><a href="/devguide/">The CloudShell DevGuide</a></li>
        
        
        
                    <li data-page-id="_introduction/setting-up-the-development-ide.md" data-order="1"><a href="/devguide/introduction/setting-up-the-development-ide.html">Setting up the Development Environment</a></li>
        
     
        <li class="nav-header">Extending cloudshell with shells</li>
        
        
        
                    <li data-page-id="_shells/getting-started.md" data-order="1"><a href="/devguide/shells/getting-started.html">Getting Started</a></li>
        
                    <li data-page-id="_shells/shell-driver-overview.md" data-order="2"><a href="/devguide/shells/shell-driver-overview.html">Shell Drivers Overview</a></li>
        
                    <li data-page-id="_shells/the-shell-project.md" data-order="3"><a href="/devguide/shells/the-shell-project.html">The Shell Project Guide</a></li>
        
                    <li data-page-id="_shells/modeling-the-shell.md" data-order="4"><a href="/devguide/shells/modeling-the-shell.html">Modeling Shells with TOSCA</a></li>
        
                    <li data-page-id="_shells/generating-shell-data-model.md" data-order="5"><a href="/devguide/shells/generating-shell-data-model.html">Managing the Shell’s Data Model</a></li>
        
                    <li data-page-id="_shells/getting-information-from-cloudshell.md" data-order="5"><a href="/devguide/shells/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
        
                    <li data-page-id="_shells/customizing-driver-commands.md" data-order="6"><a href="/devguide/shells/customizing-driver-commands.html">Commands Visibility and Usability</a></li>
        
                    <li data-page-id="_shells/driver-deep-dive.md" data-order="6"><a href="/devguide/shells/driver-deep-dive.html">Driver Deep Dive</a></li>
        
                    <li data-page-id="_shells/implementing-discovery-for-inventory-shells.md" data-order="7"><a href="/devguide/shells/implementing-discovery-for-inventory-shells.html">Auto-discovery for Inventory Shells</a></li>
        
                    <li data-page-id="_shells/discovering-inventory-snmp.md" data-order="8"><a href="/devguide/shells/discovering-inventory-snmp.html">Discovering Inventory using SNMP</a></li>
        
                    <li data-page-id="_shells/debugging-shell-commands.md" data-order="9"><a href="/devguide/shells/debugging-shell-commands.html">Debugging Shell Driver Commands</a></li>
        
                    <li data-page-id="_shells/deploying-to-production.md" data-order="11"><a href="/devguide/shells/deploying-to-production.html">Deploying to Production</a></li>
        
                    <li data-page-id="_shells/common-driver-recipes.md" data-order="12"><a href="/devguide/shells/common-driver-recipes.html">Common Driver Recipes</a></li>
        
                    <li data-page-id="_shells/migrating_1st_gen_shells.md" data-order="13"><a href="/devguide/shells/migrating_1st_gen_shells.html">Converting 1st Gen Shells into 2nd Gen Shells</a></li>
        
                    <li data-page-id="_shells/tips-and-tricks.md" data-order="13"><a href="/devguide/shells/tips-and-tricks.html">Tips and Tricks</a></li>
        
     
        <li class="nav-header">Orchestration scripts</li>
        
        
        
                    <li data-page-id="_orchestration/getting-started.md" data-order="1"><a href="/devguide/orchestration/getting-started.html">Getting Started</a></li>
        
                    <li data-page-id="_orchestration/getting-information-from-cloudshell.md" data-order="2"><a href="/devguide/orchestration/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
        
                    <li data-page-id="_orchestration/script-commands-customization.md" data-order="6"><a href="/devguide/orchestration/script-commands-customization.html">Script commands Visibility and Usability</a></li>
        
                    <li data-page-id="_orchestration/scripts-deep-dive.md" data-order="6"><a href="/devguide/orchestration/scripts-deep-dive.html">Scripts Deep Dive</a></li>
        
                    <li data-page-id="_orchestration/common-orchestration-recipes.md" data-order="9"><a href="/devguide/orchestration/common-orchestration-recipes.html">Common Orchestration Script Recipes</a></li>
        
                    <li data-page-id="_orchestration/the-oob-orchestration.md" data-order="9"><a href="/devguide/orchestration/the-oob-orchestration.html">CloudShell's OOB Orchestration</a></li>
        
     
        <li class="nav-header">Integrating cloudshell into the devops cycle</li>
        
        
        
                    <li data-page-id="_devops/devops-integration.md" data-order="1"><a href="/devguide/devops/devops-integration.html">Automating CloudShell Sandboxes for DevOps</a></li>
        
     
        <li class="nav-header">Reference</li>
        
        
        
                    <li data-page-id="_reference/python-coding-standards.md" data-order="7"><a href="/devguide/reference/python-coding-standards.html">Python Coding Standards</a></li>
        
     
</ul>

                    </div>

                    <div id="content" class="col-md-9 col-sm-8">
                        

<div class="page-header" data-page-id="_shells/getting-started.md">
    <h2>Getting Started
        
        
          <span style="float: right;font-size: 20px"><small><a href="https://github.com/QualiSystems/devguide_source/tree/master/_shells/getting-started.md">Suggest edits</a></small></span>
        
    </h2>
</div>

<p>In this section, we’ll go through the basic steps of creating a new Shell. The goal is to demonstrate the end-to-end cycle, from generating a new Shell project to instancing Shell resources and running commands in CloudShell.</p>

<h3 id="supported-versions---cloudshell-v80-and-up">Supported versions - CloudShell v.8.0 and up</h3>
<p>As of version 8.0, CloudShell supports 2nd Gen Shells. This guide includes instructions on developing <strong>2nd Gen Shells only</strong>.</p>

<p>For information on developing 1st Gen Shells, see <a href="https://qualisystems.github.io/devguide_7/">CloudShell Developer Guide</a> CloudShell v7.1 and below.</p>

<p>To learn more about the  different versions of the Shells used by CloudShell and how to upgrade a 1st Gen Shell, see <a href="/devguide/shells/migrating_1st_gen_shells.html">Converting 1st Generation Shells</a></p>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
  <li><a href="http://info.quali.com/cloudshell-developer-edition-download">Get CloudShell</a>: Download the latest CloudShell SDK and run it on your machine.</li>
  <li><strong>Python</strong>: Make sure Python <a href="https://www.python.org/downloads/">Python</a> 2.7.x (latest recommended) is installed on your machine.</li>
  <li><strong>IDE/Text Editor:</strong> Your preferred IDE editor. We recommend using PyCharm (which offers a free community edition) because of the tooling we’ve already created for that IDE, including a CloudShell developer plugin.</li>
  <li><strong>ShellFoundry</strong> Install ShellFoundry using pip. Run the following in your local Command Line:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python -m pip install shellfoundry</code></pre></figure>

<p>If ShellFoundry is already installed, run the following command to update:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python -m pip install shellfoundry --update</code></pre></figure>

<h3 id="creating-the-shell-project">Creating the Shell Project</h3>
<p>To create the Shell project, we’ll use ShellFoundry, a CLI tool for generating and distributing Shells. If you installed the prerequisites listed above, this tool should already be installed and ready on your system.
For windows users, it is recommended to add the path to the folder in which ShellFoundry is installed to your local environment variables. For example, <em>C:\Python27\Scripts</em>. This will enable us to run the ShellFoundry commands from any folder of the Shell project.</p>

<p><strong>To create a new project:</strong></p>

<p>1) Run the following command in your local Command Line:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry new linux-server-shell
cd linux-server-shell</code></pre></figure>

<p>A new sub folder containing the basic Shell project’s structure and files will be created.</p>

<p>2) Navigate to the new folder. The following files have been created for you:</p>

<p><img src="/devguide/assets/shell_folder.png" alt="Directory Structure" /></p>

<p>The generated folder contains all of the basic scaffolding needed for the new Shell. We will review the Shell project’s structure in a more in-depth manner in later stages of this guide.</p>

<p>3) Run the following command from the root of the project folder</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python -m pip install -r .\src\requirements.txt</code></pre></figure>

<p>This command makes sure all of the basic package requirements for the Shell are satisfied.</p>

<h3 id="testing-the-basic-workflow">Testing the basic workflow</h3>

<p><strong>To test the basic workflow:</strong></p>

<ol>
  <li>Make a minor change to the driver</li>
  <li>Install the Shell to your local CloudShell</li>
  <li>Create an instance of your Shell resource in the local CloudShell inventory</li>
  <li>‘Hello world’</li>
</ol>

<h4 id="make-a-minor-change-to-the-driver">Make a minor change to the driver</h4>

<p>The source control for the Shell is managed under the <em>src</em> folder. When importing the project template, ShellFoundry already created a driver template under this folder.
To make sure everything is in working order, we’ll implement an example command in the <em>driver.py</em> file.
We’ll also want to add basic metadata including an alias and description. The way to do that is by editing the <em>drivermetadata.xml</em> file located in the <em>src</em> folder. For example, we can add a new command category under the <em>Layout</em> element.</p>

<p><strong>To make changes to the driver:</strong></p>

<p>1) Open the <em>driver.py</em> file in your preferred IDE. You’ll see that it already contains a driver for the Shell with some example commands already in place.</p>

<p>2) Add a simple ‘hello world’ command to the driver:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">def say_hello(self, context, name):
    &quot;&quot;&quot;
    :param ResourceCommandContext context: the context the command runs on
    :param str name: A user parameter
    &quot;&quot;&quot;
    return &quot;hello {name} from {resource_name}&quot;.format(name=name, resource_name=context.resource.name)</code></pre></figure>

<p>3) Open the <em>drivermetadata.xml</em> file in your preferred IDE and replace the highlighted section so that it matches the test below:</p>

<div>
  <pre data-line="3-12"><code class="language-python">&lt;Driver Description=&quot;Describe the purpose of your CloudShell shell&quot; MainClass=&quot;driver.LinuxServerShellDriver&quot; Name=&quot;LinuxServerShellDriver&quot; Version=&quot;1.0.0&quot;&gt;
    &lt;Layout&gt;
        &lt;Category Name=&quot;Samples&quot;&gt;
            &lt;Command Description=&quot;Simple hello world function&quot; DisplayName=&quot;Say Hello&quot; Name=&quot;say_hello&quot; &gt;
                &lt;Parameters&gt;
                    &lt;Parameter Name=&quot;name&quot; Type=&quot;String&quot; Mandatory = &quot;True&quot; DefaultValue=&quot;&quot; DisplayName=&quot;Your name&quot;
                               Description=&quot;Enter your full name here&quot;/&gt;
                &lt;/Parameters&gt;
            &lt;/Command&gt;
        &lt;/Category&gt;
    &lt;/Layout&gt;
&lt;/Driver&gt;</code></pre>
</div>

<p>There is no need to get into too many details at this stage. We’ll dive more deeply into the <em>drivermetadata.xml</em> file in a later section of this guide. For now it’s sufficient to understand that we use this file to provide more CloudShell-specific information regarding how to interpret and display the driver’s commands and their parameters.</p>

<p>4) Save the <em>driver.py</em> and <em>drivermetadata.xml</em> files.</p>

<p>We’re now ready to install the new Shell.</p>

<h4 id="install-the-shell-on-cloudshell">Install the Shell on CloudShell</h4>

<p>ShellFoundry provides an easy and convenient way to create the Shell package and install it on your CloudShell server. To make use of this feature, we’ll need to first configure your CloudShell connection settings on the Shell.</p>

<p><strong>Note:</strong> 2nd Generation Shells can also be imported into CloudShell Portal.</p>

<p><strong>To configure CloudShell settings:</strong></p>

<p>1) Run the following command in your command Line to see all the available configuration parameters:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry config</code></pre></figure>

<p><img src="/devguide/assets/sf_config.png" alt="Directory Structure" /></p>

<p>The configuration includes some default settings that you can change.</p>

<p>2) To update a default setting, run the <em>config</em> command with two arguments: the parameter name and the new value.
For example, changing the username to “John”:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry config username John</code></pre></figure>

<p>Normally, you would need to set the CloudShell admin user/password and the server address.</p>

<p>3) To package the Shell and install it on your local CloudShell server, run the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry install</code></pre></figure>

<h4 id="create-an-instance-of-your-shell-resource-in-the-local-cloudshell-inventory">Create an instance of your Shell resource in the local CloudShell inventory</h4>

<p>The Shell is installed in your development CloudShell. We can now create resources of that Shell in our inventory.</p>

<p>1) Log in to your CloudShell Portal.</p>

<p>2) Click the <strong>Inventory</strong> menu.</p>

<p>3) In the <strong>Inventory</strong> dashboard, click <strong>Add New</strong>, select the <strong>LinuxServerShell</strong>.</p>

<p>4) Provide a name and an address for the shell resource, for example “HelloWorld_Shell”. For now, since we don’t have an address of an actual server, you can provide any value for the address.</p>

<p>5) Click <strong>Create</strong>.</p>

<p>6) Click <strong>Start discovery</strong> to complete the operation.</p>

<p><img src="/devguide/assets/hello_world_shell.png" alt="Shell Discovery" /></p>

<h4 id="hello-world">‘Hello world’</h4>

<p>Now that we’ve added the Shell resource, we can finally add it to a blueprint and reserve it as a sandbox.</p>

<p>1) In CloudShell Portal, from the main menu, click <strong>Lab Management &gt; Blueprints</strong>.</p>

<p>2) Create a new blueprint or open an existing one. To create a new blueprint, click the + <strong>Create Blueprint link</strong>.</p>

<p>3) Click the toolbar’s <strong>Resource</strong> button and drag the new Shell resource into the diagram.</p>

<p>4) Click <strong>Reserve</strong> to create a new sandbox.</p>

<p>5) In the <strong>Sandbox</strong> workspace, hover over the Shell resource and select <strong>Commands</strong>. The <strong>Resource Commands</strong> pane is displayed.</p>

<p>6) To run the Say Hello command, in the Resource Commands pane, click the play button next to the command.</p>

<p><img src="/devguide/assets/getting_started_hello_world.png" alt="Shell Discovery" /></p>

<p>The common output is displayed in the <strong>Output console</strong>.
<img src="/devguide/assets/getting_started_hello_world_output.png" alt="Shell Discovery" /></p>

<h3 id="development-process-summary">Development process summary</h3>

<p>In this tutorial we’ve covered the basic steps to develop a Shell. The process is illustrated in the below diagram:</p>

<p><img src="/devguide/assets/shell_development_workflow.png" alt="Context Object" /></p>

<p>The basic flow is:</p>

<p>1) Create a new Shell project by running <em>shellfoundry new</em>.</p>

<p>2) Configure the Shell in the <em>shell-definitions.yaml</em> file located in the Shell project’s root folder.</p>

<p>3) Import the Shell to the development server using <em>shellfoundry install</em>.</p>

<p>4) Create a resource of the Shell for testing:
  a. For an <em>inventory resource</em> Shell: Create a Shell inventory resource in CloudShell using its <em>Resource Template</em>.
  b. For a <em>deployed app</em> Shell: Define the App template in CloudShell including the deployment type and parameters, set the App model to the Shell model.</p>

<p>5) 	Create a sandbox for testing in the development server: either add the inventory resource to the sandbox or deploy the App in the sandbox.</p>

<p>6) Make incremental changes to the Shell and update the development server each time with the changes by running <em>shellfoundry install</em>.</p>

<p>7) Rinse and repeat!</p>

<p>For more information on how to deploy the Shell to production, refer to the <a href="/devguide/shells/deploying-to-production.html">Deploying to Production</a> section.</p>

<h4 id="whats-next">What’s next</h4>

<p>We’ve successfully gone through the steps of adding a basic, working Shell. In the following sections, we’ll review all of these steps in depth as well as the concepts, available options and customizations, and see how they  interface with CloudShell.</p>








    <div id="post-nav" class="clearfix">
        
        
            <a class="next" href="/devguide/shells/shell-driver-overview.html">Shell Drivers Overview &raquo;</a>
        
    </div>




<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        var disqus_identifier = '_shells/getting-started.md';
        var disqus_url = 'https://qualisystems.github.io/shells/getting-started.html';
        this.page.url = "https://qualisystems.github.io/devguide/shells/getting-started.html";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = disqus_identifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//qualidev.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






<ul >
    
</ul>


<script src="/devguide/js/search.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl  : '/devguide/js/index.json',           // url for the .json file containing search index data
      results   : '#search-results',          // selector for containing search results element
      template  : '#search-results-template', // selector for Mustache.js template
      titleMsg  : '',   // message attached in front of results (can be empty)
      emptyMsg  : '<p>Nothing found.</p>'     // shown message if search returns no results
    });
  });
</script>

<script>
$(function() {
    page = $(".page-header").attr("data-page-id")
    nav_item = $(".nav li[data-page-id='"+page+"']")
    if (nav_item) {
        $(".nav").find(".active").removeClass("active");
        nav_item.addClass("active");
    }
})
</script>

                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="http://www.quali.com">CloudShell Developer Guide</a>

                </div>
            </div>
        </div>

        <script src="/devguide/js/prism.js"></script>

        
        <script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-81468206-1', 'auto');
 ga('send', 'pageview');

</script>

        
    </body>
</html>
