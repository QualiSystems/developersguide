<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="search" type="application/opensearchdescription+xml" title="CloudShell DevGuide" href="/opensearch.xml" />
        <title>CloudShell Developer Guide : L2 Network Connectivity</title>
        <meta name="description" content="">
        <link rel="shortcut icon" type="image/png" href="/favicon.png?">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/prism.css">
        <link rel="stylesheet" href="/css/QualiStyle.css">
        <link rel="stylesheet" href="/css/samples.css">
        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/test-hot-block.webflow.css">


        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <script src="/js/jquery-3.1.0.min.js"></script>
        <script src="/js/modernizr.js"></script>
        <script src="/js/webflow.js"></script>
        <script src="/js/version-redirect.js"></script>

        
    </head>
    <body>
        <div id="header">
            <div class="container">
                <div class="row">
    <div class="col-md-3 col-sm-4">
        <a class="brand" href="/">
            <img alt="CloudShell Logo" src="/assets/logo.png" />
            CloudShell <small>Developer Guide</small>
        </a>
    </div>
    <div class="col-md-9 col-sm-8">
        
		  
        <form class="search" action="/search/9.1.0/search.html">
            <input class="input" id="search-query" type="text" name="q" placeholder="Search" />
            <input class="button" type="submit" value="Search"></input>
        </form>
    </div>
</div>

            </div>
        </div>
        <div class="container">
            <div class="row"> 
            	
                <!-- <div class="col-md-3"><span> Sveta </span></div> -->
                               
                
                
                    <div id="navigation" class="col-md-3 col-sm-4">
                        <span><strong>CloudShell Version: </strong></span>
                        <div id="versions">
                            <div class="form-group" onchange="versionChange(this)">
	<select class="form-control" id="version">
   
   	
		
	
		  
	  <option value="9.3.0">9.3.0</option>
	
	
		  
	  <option value="9.2.0">9.2.0</option>
	
	
	
	  <option value="9.1.0" selected>9.1.0</option>
	
	
		  
	  <option value="9.0.0">9.0.0</option>
	
	
		  
	  <option value="8.3.0">8.3.0</option>
	
	
		  
	  <option value="2020.1.0">2020.1.0</option>
	
	
	</select>
</div>
                        </div>
                        <ul class="nav nav-list" style="margin-top: -30px;">  
     
        
           <li class="nav-header"></li>
			  
           
           
        
           <li class="nav-header">Introduction</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_introduction/9.1.0/the-cloudshell-devguide.md" data-order="1"><a href="/introduction/9.1.0/the-cloudshell-devguide.html">The CloudShell DevGuide</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_introduction/9.1.0/setting-up-the-development-ide.md" data-order="2"><a href="/introduction/9.1.0/setting-up-the-development-ide.html">Setting up the Development Environment</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Extending cloudshell with shells</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/getting-started.md" data-order="1"><a href="/shells/9.1.0/getting-started.html">Getting Started</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/shell-driver-overview.md" data-order="2"><a href="/shells/9.1.0/shell-driver-overview.html">Shell Drivers Overview</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/the-shell-project.md" data-order="3"><a href="/shells/9.1.0/the-shell-project.html">The Shell Project Guide</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/modeling-the-shell.md" data-order="4"><a href="/shells/9.1.0/modeling-the-shell.html">Modeling Shells with TOSCA</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/generating-shell-data-model.md" data-order="5"><a href="/shells/9.1.0/generating-shell-data-model.html">Managing the Shell’s Data Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/getting-information-from-cloudshell.md" data-order="6"><a href="/shells/9.1.0/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/customizing-driver-commands.md" data-order="7"><a href="/shells/9.1.0/customizing-driver-commands.html">Commands Visibility and Usability</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/driver-deep-dive.md" data-order="8"><a href="/shells/9.1.0/driver-deep-dive.html">Driver Deep Dive</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/implementing-discovery-for-inventory-shells.md" data-order="9"><a href="/shells/9.1.0/implementing-discovery-for-inventory-shells.html">Auto-discovery for Inventory Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/discovering-inventory-snmp.md" data-order="10"><a href="/shells/9.1.0/discovering-inventory-snmp.html">Discovering Inventory using SNMP</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/debugging-shell-commands.md" data-order="11"><a href="/shells/9.1.0/debugging-shell-commands.html">Debugging Shell Driver Commands</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/deploying-to-production.md" data-order="12"><a href="/shells/9.1.0/deploying-to-production.html">Deploying to Production</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/customizing-shells.md" data-order="13"><a href="/shells/9.1.0/customizing-shells.html">Customizing Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/common-driver-recipes.md" data-order="14"><a href="/shells/9.1.0/common-driver-recipes.html">Common Driver Recipes</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/tips-and-tricks.md" data-order="15"><a href="/shells/9.1.0/tips-and-tricks.html">Tips and Tricks</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/sharing-shells-with-community.md" data-order="16"><a href="/shells/9.1.0/sharing-shells-with-community.html">Sharing a Shell with the Community</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.1.0/1st-gen-shells.md" data-order="17"><a href="/shells/9.1.0/1st-gen-shells.html">1st Gen Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Orchestration scripts</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/getting-started.md" data-order="1"><a href="/orchestration/9.1.0/getting-started.html">Getting Started</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/getting-information-from-cloudshell.md" data-order="2"><a href="/orchestration/9.1.0/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/script-commands-customization.md" data-order="6"><a href="/orchestration/9.1.0/script-commands-customization.html">Script commands Visibility and Usability</a></li>
						
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/scripts-deep-dive.md" data-order="6"><a href="/orchestration/9.1.0/scripts-deep-dive.html">Scripts Deep Dive</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/common-orchestration-recipes.md" data-order="9"><a href="/orchestration/9.1.0/common-orchestration-recipes.html">Common Orchestration Script Recipes</a></li>
						
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.1.0/the-oob-orchestration.md" data-order="9"><a href="/orchestration/9.1.0/the-oob-orchestration.html">CloudShell's OOB Orchestration</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Configuration management</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-overview.md" data-order="1"><a href="/configmanagement/9.1.0/cf-overview.html">Overview</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-custom-scripts.md" data-order="2"><a href="/configmanagement/9.1.0/cf-custom-scripts.html">Custom Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-add-custom-script-to-app.md" data-order="3"><a href="/configmanagement/9.1.0/cf-add-custom-script-to-app.html">Adding Your Script to an App</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-custom-scripts-tips-and-tricks.md" data-order="4"><a href="/configmanagement/9.1.0/cf-custom-scripts-tips-and-tricks.html">Tips and Tricks for Custom Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-ansible.md" data-order="5"><a href="/configmanagement/9.1.0/cf-ansible.html">Ansible</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-ansible-examples.md" data-order="6"><a href="/configmanagement/9.1.0/cf-ansible-examples.html">Ansible Playbook Examples</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-add-playbook-to-app.md" data-order="7"><a href="/configmanagement/9.1.0/cf-add-playbook-to-app.html">Adding the Playbook to an App</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.1.0/cf-ansible-tips-and-tricks.md" data-order="8"><a href="/configmanagement/9.1.0/cf-ansible-tips-and-tricks.html">Tips and Tricks for Ansible Playbooks</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Extending cloudshell with cloud providers</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/getting-started-with-cloud-providers.md" data-order="1"><a href="/cloudproviders/9.1.0/getting-started-with-cloud-providers.html">Getting Started with Cloud Providers</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/creating-cloud-provider-shell.md" data-order="3"><a href="/cloudproviders/9.1.0/creating-cloud-provider-shell.html">Creating the Cloud Provider Shell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/the-cloud-provider-model.md" data-order="5"><a href="/cloudproviders/9.1.0/the-cloud-provider-model.html">The Cloud Provider Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/extending-cloud-provider-shell-data-model.md" data-order="7"><a href="/cloudproviders/9.1.0/extending-cloud-provider-shell-data-model.html">Extending the Shell's Data Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/removing-the-address-field.md" data-order="8"><a href="/cloudproviders/9.1.0/removing-the-address-field.html">Removing the Address Field</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/configuring-deployment-paths.md" data-order="9"><a href="/cloudproviders/9.1.0/configuring-deployment-paths.html">Configuring Deployment Paths</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/controlling-app-deployment-orchestration.md" data-order="11"><a href="/cloudproviders/9.1.0/controlling-app-deployment-orchestration.html">Controlling App Deployment Orchestration</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/the-cloud-provider-interface.md" data-order="13"><a href="/cloudproviders/9.1.0/the-cloud-provider-interface.html">The Cloud Provider Interface</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/resource-discovery.md" data-order="15"><a href="/cloudproviders/9.1.0/resource-discovery.html">Resource Discovery</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/app-deployment.md" data-order="17"><a href="/cloudproviders/9.1.0/app-deployment.html">App Deployment</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/power-off-and-delete.md" data-order="19"><a href="/cloudproviders/9.1.0/power-off-and-delete.html">Power off and Delete VM</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/L2-networking-management.md" data-order="21"><a href="/cloudproviders/9.1.0/L2-networking-management.html">L2 Network Connectivity</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.1.0/L3-networking-management.md" data-order="23"><a href="/cloudproviders/9.1.0/L3-networking-management.html">L3 Network Connectivity</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Cloudshell apis</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_devops/9.1.0/available-apis.md" data-order="1"><a href="/devops/9.1.0/available-apis.html">Available CloudShell APIs</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_devops/9.1.0/devops-integration.md" data-order="2"><a href="/devops/9.1.0/devops-integration.html">Automating CloudShell Sandboxes for DevOps</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
           <li class="nav-header">Reference</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					
           
               
			      
					               
               	
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/python-coding-standards.md" data-order="7"><a href="/reference/9.1.0/python-coding-standards.html">Python Coding Standards</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/shellfoundry-intro.md" data-order="8"><a href="/reference/9.1.0/shellfoundry-intro.html">Shellfoundry</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/quali-shell-framework.md" data-order="9"><a href="/reference/9.1.0/quali-shell-framework.html">Quali’s Shell Framework (Python 2)</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/migrating_1st_gen_shells.md" data-order="10"><a href="/reference/9.1.0/migrating_1st_gen_shells.html">Converting 1st Gen Shells into 2nd Gen</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/associating-service-categories.md" data-order="11"><a href="/reference/9.1.0/associating-service-categories.html">Categories in 1st Gen Service Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/mapping-sub-resource-connections.md" data-order="12"><a href="/reference/9.1.0/mapping-sub-resource-connections.html">Mapping Connections using App Sub-resources</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/L1-switch-shell.md" data-order="13"><a href="/reference/9.1.0/L1-switch-shell.html">L1 Switch Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/short-dev-videos.md" data-order="14"><a href="/reference/9.1.0/short-dev-videos.html">Short Development Videos</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/resource-scripts.md" data-order="15"><a href="/reference/9.1.0/resource-scripts.html">Resource Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/defining-Azure-custom-routing.md" data-order="17"><a href="/reference/9.1.0/defining-Azure-custom-routing.html">Custom Routing for Azure Apps</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/creating-static-vm.md" data-order="21"><a href="/reference/9.1.0/creating-static-vm.html">Shells that Load a Static VM</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.1.0/intellisense-with-docstrings.md" data-order="23"><a href="/reference/9.1.0/intellisense-with-docstrings.html">Intellisense in Shells and Scripts (using Docstrings)</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
        
</ul>

                    </div>

                    <div id="content" class="col-md-9 col-sm-8">
                        

<div class="page-header" data-page-id="_cloudproviders/9.1.0/L2-networking-management.md">
    <h2>L2 Network Connectivity
        
        
          
        
    </h2>
</div>

<p>Now that we’ve set up the cloud provider shell’s automation, let’s learn how to implement network connectivity. CloudShell supports two networking modes, L2 for VLAN-level management and L3 for subnet-level management. This article discusses layer 2 connectivity. If you’re developing an L3 cloud provider, skip to the next article.</p>

<h2 id="applyconnectivitychanges-method">ApplyConnectivityChanges method</h2>

<p>To add support for L2 VLAN connectivity in a custom cloud provider, we need to implement the <em>ApplyConnectivityChanges</em> method. This method is used to connect the VMs in the sandbox to the network elements.</p>

<p>The VLAN IDs are allocated by Quali Server, according to the settings of the VLAN service. These IDs are sent to the command as parameters. The implementation of this method needs to be able to support Access mode, Trunk mode, VLAN and VXLAN ranges, if supported by your cloud provider. Additionally, the implementation needs to support a range of VLAN IDs.</p>

<p>The <em>ApplyConnectivityChanges</em> method can receive a list of actions of type <em><strong>setVlan</strong></em> or <em><strong>removeVlan</strong></em>. The method receives an action for each connection that needs to be created or disconnected. In case of P2P connections, the method receives two requests, one for each App.</p>

<p>Like other methods, this method needs to return an action result in the response per connection. If the method’s execution fails, CloudShell needs to indicate the failure in the returned action or raise an exception.</p>

<h3 id="called-when">Called when</h3>
<p>It is run automatically when reserving the sandbox, as part of CloudShell’s default sandbox setup script, and is also called in an active sandbox when a deployed App is connected or disconnected from a VLAN service or from another deployed App in a P2P connection.</p>

<h3 id="error-handling">Error handling</h3>

<p>If <em>ApplyConnectivityChanges</em> fails, CloudShell needs to indicate the failure in the returned action or raise an exception.</p>

<h3 id="signature">Signature</h3>

<figure class="highlight"><pre><code class="language-python" data-lang="python">def ApplyConnectivityChanges(self, context, request):</code></pre></figure>

<h3 id="inputs">Inputs</h3>

<p><strong>context</strong>: <em>context</em> is a <em>ResourceCommandContext</em> object that contains:</p>

<ol>
  <li>connectivity - CloudShell server connectivity data for authentication with CloudShell Automation API</li>
  <li>resource - resource configuration settings entered when creating the Cloud Provider resource in the <strong>Inventory</strong> dashboard</li>
  <li>reservation - current reservation details</li>
  <li>connectors – details of any visual connectors between the Cloud Provider App and other endppoints in the sandbox.</li>
</ol>

<div class="github-sample-reference">
  <div class="author-info">
    <a href="https://github.com/QualiSystems/cloudshell-shell-core/blob/36009fdec45134ae38cb9273328b7686be66e553/cloudshell/shell/core/driver_context.py">This Github Sample</a> is by <a href="https://github.com/QualiSystems">QualiSystems</a>
  </div>
  <div class="meta-info">
    cloudshell/shell/core/driver_context.py <a href="https://github.com/QualiSystems/cloudshell-shell-core/blob/36009fdec45134ae38cb9273328b7686be66e553/cloudshell/shell/core/driver_context.py">view</a> <a href="https://raw.githubusercontent.com/QualiSystems/cloudshell-shell-core/36009fdec45134ae38cb9273328b7686be66e553/cloudshell/shell/core/driver_context.py">raw</a>
  </div>
</div>

<figure class="highlight"><pre><code class="language-python" data-lang="python">class ResourceCommandContext:
    def __init__(self, connectivity, resource, reservation, connectors):
        self.connectivity = connectivity  # Connectivity details that can help connect to the APIs
        &quot;&quot;&quot;:type : ConnectivityContext&quot;&quot;&quot;
        self.resource = resource  # The details of the resource using the driver
        &quot;&quot;&quot;:type : ResourceContextDetails&quot;&quot;&quot;
        self.reservation = reservation  # The details of the reservation
        &quot;&quot;&quot;:type : ReservationContextDetails&quot;&quot;&quot;
        self.connectors = connectors  # The list of visual connectors and routes that are connected to the resource (the resource will be considered as the source end point)
        &quot;&quot;&quot;:type : list[Connector]&quot;&quot;&quot;</code></pre></figure>

<h4 id="handle-request">Handle Request</h4>

<p><strong>setVlan action request:</strong></p>

<ul>
  <li>The requested VLAN mode is indicated in a property called <em>mode</em> under <em>connectionParams</em>. The VLAN id array can receive many VLAN id permutations. Please refer to the online help for all support permutations.</li>
  <li>If the cloud provider supports VXLAN or both VLAN and VXLAN, it is required to expose a discoverable attribute on the cloud provider’s <strong>VLAN Type</strong> call. The default value is <strong>VLAN</strong> and cloudshell permits VLAN ids in the 2-4096 range. If the <strong>VLAN Type</strong> attribute is set to <strong>VXLAN</strong>, CloudShell will permit VLAN ids to be allocated in the 2-16,000,000 range.</li>
  <li><em>customAttributes</em> is a list of special attributes for a specific action. The <em>setVlan</em> action can get a custom attribute called <strong>Vnic Name</strong>. When this attribute exists, we can use it in custom logic that will allocate a specific VNIC to the App’s VM. For example, the <strong>Vnic Name</strong> value is 1 and the cloud provider shell needs to create the VLAN connection on eth1. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/ac94224fd2368aaa9b589bcdfd30e449a53c90ce/src/heavenly_cloud_service_wrapper.py#L299" target="_blank">Code example</a>.</li>
</ul>

<p><strong>removeVlan action request:</strong></p>

<ul>
  <li>The <em>actionTarget</em> property is an object that indicates on which compute resource we need to apply the <em>removeVlan</em> action request.</li>
  <li>The target resource might have more than one network interface so to determine on which interface to perform the <em>removeVlan</em> action, you need to find the <em>interface</em> attribute value. The <em>removeVlan</em> request contains an array of all connector attributes. The unique identifier of the network interface to disconnect is the value of the <em>Interface</em> attribute.</li>
</ul>

<h4 id="method-result">Method result</h4>

<p><strong>setVlan action result:</strong></p>

<p>If the action is successful, you need to set <em>updatedInterface</em> property. The value of this property is set on an attribute on the relevant connector. Each connector in CloudShell has a source and a target component. Cloudshell automatically determines if the action result is for source or target of the connector and sets this value on the appropriate attribute - <strong>Source Interface</strong> or <strong>Target Interface</strong>.</p>

<p><a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/e5a7fffbda4e661b58dc30f9e6355981dfc0bb86/src/heavenly_cloud_service_wrapper.py#L300-L302" target="_blank">Code example</a></p>

<p><strong>removeVlan action result:</strong></p>

<p>You only need to indicate if the action is successful or not.</p>

<p><a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/e5a7fffbda4e661b58dc30f9e6355981dfc0bb86/src/heavenly_cloud_service_wrapper.py#L340-L344" target="_blank">Code example</a></p>

<h3 id="applyconnectivitychanges-method-implementation">ApplyConnectivityChanges method implementation</h3>

<p>The <em>ApplyConnectivityChanges</em> method should perform the following steps:</p>

<p> 1. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/625d52ae7740cf3d77e529f6b0b0f8d05df472b2/src/driver.py#L229" target="_blank">Retrieve cloud provider resource connection credentials</a>.</p>

<p> 2. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/625d52ae7740cf3d77e529f6b0b0f8d05df472b2/src/driver.py#L230" target="_blank">Retrieve actions from request</a>.</p>

<p> 3. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/625d52ae7740cf3d77e529f6b0b0f8d05df472b2/src/driver.py#L232-L234" target="_blank">Handle Remove Vlan actions</a>.</p>

<p>     a. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L371" target="_blank">Retrieve requested interface to disconnect</a>.</p>

<p>     b. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L372" target="_blank">Retrieve requested VM id to disconnect</a>.</p>

<p>     c. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L373" target="_blank">Disconnect</a>.</p>

<p>     d. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L375" target="_blank">Return the result</a>.</p>

<p> 4. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/driver.py#L236-L237" target="_blank">Handle <em>setVlan</em> actions</a>.</p>

<p>     a. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L320-L324" target="_blank">Retrieve VLAN parameters (VNIC name, VLAN mode, VLAN id)</a>.</p>

<p>     b. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/e5a7fffbda4e661b58dc30f9e6355981dfc0bb86/src/heavenly_cloud_service_wrapper.py#L300" target="_blank">Connect</a>.</p>

<p>     c. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/7bd55725d8e8dbd741270f5d082f05062c1d1fab/src/heavenly_cloud_service_wrapper.py#L325" target="_blank">Add a new interface id to the result</a>.</p>

<p> 5. <a href="https://github.com/QualiSystems/Custom-L2-Cloud-Provider-Shell-Example/blob/625d52ae7740cf3d77e529f6b0b0f8d05df472b2/src/driver.py#L239" target="_blank">Return the appropriate result</a>.</p>









    <div id="post-nav" class="clearfix">
        
            <a class="prev" href="/cloudproviders/9.1.0/power-off-and-delete.html">&laquo; Power off and Delete VM</a>
        
        
            <a class="next" href="/cloudproviders/9.1.0/L3-networking-management.html">L3 Network Connectivity &raquo;</a>
        
    </div>




<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        var disqus_identifier = '_cloudproviders/9.1.0/L2-networking-management.md';
        var disqus_url = 'https://devguide.quali.com/cloudproviders/9.1.0/L2-networking-management.html';
        this.page.url = "https://devguide.quali.com/cloudproviders/9.1.0/L2-networking-management.html";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = disqus_identifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//qualidev.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






<ul >
    
</ul>


<script src="/js/search.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl  : '/js/index.json',           // url for the .json file containing search index data
      results   : '#search-results',          // selector for containing search results element
      template  : '#search-results-template', // selector for Mustache.js template
      titleMsg  : '',   // message attached in front of results (can be empty)
      emptyMsg  : '<p>Nothing found.</p>'     // shown message if search returns no results
    });
  });
</script>

<script>
$(function() {
    page = $(".page-header").attr("data-page-id")
    nav_item = $(".nav li[data-page-id='"+page+"']")
    if (nav_item) {
        $(".nav").find(".active").removeClass("active");
        nav_item.addClass("active");
    }
})
</script>

                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    
<div class="qs-control-container scroll-enable">
	<a href="https://github.com/QualiSystems/devguide_source/issues/new?title=New%20suggestion%20for%20/cloudproviders/9.1.0/L2-networking-management.html" target="_blank" class="qs-btn-round qs-btn-mail" title="Send feedback">
	</a>

	<button class="qs-btn-round qs-btn-scroll-top tooltip tooltipstered">
	</button>
</div>


Documentation for <a href="http://www.quali.com">CloudShell Developer Guide</a>

                </div>
            </div>
        </div>

        <script src="/js/prism.js"></script>
        
        <script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-81468206-1', 'auto');
 ga('send', 'pageview');

</script>

        
    </body>

</html>
