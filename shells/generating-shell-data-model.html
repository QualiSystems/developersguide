<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>CloudShell Developer Guide : Managing the Shell’s Data Model</title>
        <meta name="description" content="">
        <link rel="shortcut icon" type="image/png" href="/devguide/favicon.png?">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/devguide/css/main.css">
        <link rel="stylesheet" href="/devguide/css/prism.css">
        <link rel="stylesheet" href="/devguide/css/samples.css">
        <link rel="stylesheet" href="/devguide/css/normalize.css">
        <link rel="stylesheet" href="/devguide/css/test-hot-block.webflow.css">


        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <script src="/devguide/js/jquery-3.1.0.min.js"></script>
        <script src="/devguide/js/modernizr.js"></script>
        <script src="/devguide/js/webflow.js"></script>


        
    </head>
    <body>
        <div id="header">
            <div class="container">
                <div class="row">
    <div class="col-md-3 col-sm-4">
        <a class="brand" href="/devguide/">
            <img alt="CloudShell Logo" src="/devguide/assets/logo.png" />
            CloudShell <small>Developer Guide</small>
        </a>
    </div>
    <div class="col-md-9 col-sm-8">
        <form class="search" action="/devguide/search.html">
            <input class="input" id="search-query" type="text" name="q" placeholder="Search" />
            <input class="button" type="submit" value="Search"></input>
        </form>
    </div>
</div>

            </div>
        </div>
        <div class="container">
            <div class="row">
                
                
                    <div id="navigation" class="col-md-3 col-sm-4">
                        <ul class="nav nav-list">
     
     
        <li class="nav-header"></li>
        
        
        
     
        <li class="nav-header">Introduction</li>
        
                <li data-page-id="index.md"><a href="/devguide/">The CloudShell DevGuide</a></li>
        
        
        
                    <li data-page-id="_introduction/setting-up-the-development-ide.md" data-order="1"><a href="/devguide/introduction/setting-up-the-development-ide.html">Setting up the Development Environment</a></li>
        
     
        <li class="nav-header">Extending cloudshell with shells</li>
        
        
        
                    <li data-page-id="_shells/getting-started.md" data-order="1"><a href="/devguide/shells/getting-started.html">Getting Started</a></li>
        
                    <li data-page-id="_shells/shell-driver-overview.md" data-order="2"><a href="/devguide/shells/shell-driver-overview.html">Shell Drivers Overview</a></li>
        
                    <li data-page-id="_shells/the-shell-project.md" data-order="3"><a href="/devguide/shells/the-shell-project.html">The Shell Project Guide</a></li>
        
                    <li data-page-id="_shells/modeling-the-shell.md" data-order="4"><a href="/devguide/shells/modeling-the-shell.html">Modeling Shells with TOSCA</a></li>
        
                    <li data-page-id="_shells/generating-shell-data-model.md" data-order="5"><a href="/devguide/shells/generating-shell-data-model.html">Managing the Shell’s Data Model</a></li>
        
                    <li data-page-id="_shells/getting-information-from-cloudshell.md" data-order="5"><a href="/devguide/shells/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
        
                    <li data-page-id="_shells/customizing-driver-commands.md" data-order="6"><a href="/devguide/shells/customizing-driver-commands.html">Commands Visibility and Usability</a></li>
        
                    <li data-page-id="_shells/driver-deep-dive.md" data-order="6"><a href="/devguide/shells/driver-deep-dive.html">Driver Deep Dive</a></li>
        
                    <li data-page-id="_shells/implementing-discovery-for-inventory-shells.md" data-order="7"><a href="/devguide/shells/implementing-discovery-for-inventory-shells.html">Auto-discovery for Inventory Shells</a></li>
        
                    <li data-page-id="_shells/discovering-inventory-snmp.md" data-order="8"><a href="/devguide/shells/discovering-inventory-snmp.html">Discovering Inventory using SNMP</a></li>
        
                    <li data-page-id="_shells/debugging-shell-commands.md" data-order="9"><a href="/devguide/shells/debugging-shell-commands.html">Debugging Shell Driver Commands</a></li>
        
                    <li data-page-id="_shells/deploying-to-production.md" data-order="11"><a href="/devguide/shells/deploying-to-production.html">Deploying to Production</a></li>
        
                    <li data-page-id="_shells/common-driver-recipes.md" data-order="12"><a href="/devguide/shells/common-driver-recipes.html">Common Driver Recipes</a></li>
        
                    <li data-page-id="_shells/migrating_1st_gen_shells.md" data-order="13"><a href="/devguide/shells/migrating_1st_gen_shells.html">Converting 1st Gen Shells into 2nd Gen Shells</a></li>
        
                    <li data-page-id="_shells/tips-and-tricks.md" data-order="13"><a href="/devguide/shells/tips-and-tricks.html">Tips and Tricks</a></li>
        
     
        <li class="nav-header">Orchestration scripts</li>
        
        
        
                    <li data-page-id="_orchestration/getting-started.md" data-order="1"><a href="/devguide/orchestration/getting-started.html">Getting Started</a></li>
        
                    <li data-page-id="_orchestration/getting-information-from-cloudshell.md" data-order="2"><a href="/devguide/orchestration/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
        
                    <li data-page-id="_orchestration/script-commands-customization.md" data-order="6"><a href="/devguide/orchestration/script-commands-customization.html">Script commands Visibility and Usability</a></li>
        
                    <li data-page-id="_orchestration/scripts-deep-dive.md" data-order="6"><a href="/devguide/orchestration/scripts-deep-dive.html">Scripts Deep Dive</a></li>
        
                    <li data-page-id="_orchestration/common-orchestration-recipes.md" data-order="9"><a href="/devguide/orchestration/common-orchestration-recipes.html">Common Orchestration Script Recipes</a></li>
        
                    <li data-page-id="_orchestration/the-oob-orchestration.md" data-order="9"><a href="/devguide/orchestration/the-oob-orchestration.html">CloudShell's OOB Orchestration</a></li>
        
     
        <li class="nav-header">Integrating cloudshell into the devops cycle</li>
        
        
        
                    <li data-page-id="_devops/devops-integration.md" data-order="1"><a href="/devguide/devops/devops-integration.html">Automating CloudShell Sandboxes for DevOps</a></li>
        
     
        <li class="nav-header">Reference</li>
        
        
        
                    <li data-page-id="_reference/python-coding-standards.md" data-order="7"><a href="/devguide/reference/python-coding-standards.html">Python Coding Standards</a></li>
        
     
</ul>

                    </div>

                    <div id="content" class="col-md-9 col-sm-8">
                        

<div class="page-header" data-page-id="_shells/generating-shell-data-model.md">
    <h2>Managing the Shell’s Data Model
        
        
          <span style="float: right;font-size: 20px"><small><a href="https://github.com/QualiSystems/devguide_source/tree/master/_shells/generating-shell-data-model.md">Suggest edits</a></small></span>
        
    </h2>
</div>

<p>Shells often have a complex data model, which consists of multiple levels of hierarchy and many attributes. CloudShell provides a way to generate Python classes that represent the data model. These classes enable some Python IDEs (like PyCharm) to provide auto complete support to facilitate the development of the Shell’s driver.</p>

<h3 id="generating-the-shells-data-model">Generating the Shell’s data model</h3>
<p>As you know from previous chapters, the Shell’s data model consists of the standard specifications and the extended data model, which is defined in the <em>shell-definition.yaml</em> file. In this topic, we will explain the process of generating the <em>data_model.py</em> file and how to use it in your driver.</p>

<p>Let’s start by creating a new Switch type resource based on the <a href="https://github.com/QualiSystems/cloudshell-standards/blob/master/Documentation/networking_standard.md">Networking Shell Standard</a>.</p>

<p><strong>To generate the Shell data model:</strong></p>

<p>1) Run the following command in your Command Line to create a new Shell project</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry new generating-data-model --template=gen2/networking/switch
cd data-model-example</code></pre></figure>

<p>The Shell project includes the <em>shell-definition.yaml</em> file, which contains the information needed for importing the Shell’s data model according to the relevant TOSCA Shell standard.</p>

<p>For a detailed explanation on how to customize the Shell using TOSCA, see <a href="/devguide/shells/modeling-the-shell.html">Modeling Shells with TOSCA</a></p>

<p>2) Add the following example properties <em>custom_property_1</em> and <em>custom_property_2</em> to the  <em>shell-definition.yaml</em> file:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml">imports:
  - cloudshell_standard: cloudshell_networking_standard_4_0_1.yaml

node_types:

  vendor.ShellModeling:
    derived_from: cloudshell.nodes.Switch
    properties:
      custom_property_1:
        type: string
      custom_property_2:
        type: string</code></pre></figure>

<p>3) Save the file and make sure that the YAML format is valid. You can use online tools such as <a href="http://www.yamllint.com/">yamllint</a> to validate the format.</p>

<p>4) Run the following command in your Command Line to create the <em>data_model.py</em> file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry generate</code></pre></figure>

<p>ShellFoundry sends the <em>shell-definition.yaml</em> file to CloudShell and creates a new code file with the Shell’s data model - <em>data_model.py</em>, which is then copied into the project’s <em>src</em> folder.</p>

<h3 id="using-the-shell-data-model">Using the Shell data model</h3>
<p>To use the Shell’s data model in the driver, we need to first import the data model into the driver.</p>

<p><strong>To use data model in the driver:</strong></p>
<ul>
  <li>Add the following to <em>driver.py</em>:</li>
</ul>

<figure class="highlight"><pre><code class="language-python" data-lang="python">from data_model import *</code></pre></figure>

<p>After importing the <em>data_model</em>, PyCharm (and some other IDEs) will recognize the docstring code-hint annotations and will enable autocomplete as you can see below:</p>

<p><img src="/devguide/assets/auto_complete_demo.png" alt="Directory Structure" /></p>

<p>The <em>data_model.py</em> is mainly used to work with resource attributes and implement the Auto-discovery process.</p>

<p>For more information see the following related topics:</p>

<ul>
  <li><a href="/devguide/shells/getting-information-from-cloudshell.html">Getting Information From CloudShell</a></li>
  <li><a href="/devguide/shells/implementing-discovery-for-inventory-shells.html">Auto Discovery For Inventory Shells</a></li>
</ul>

<h3 id="updating-the-shells-data-model">Updating the Shell’s data model</h3>
<p>After you change the Shell’s data model, by changing the custom attributes in the <em>shell-definition.yaml</em> file or the reference to the CloudShell standard, you need to refresh the <em>data_model.py</em> file.</p>

<p><strong>To update the data_model.py file:</strong></p>
<ul>
  <li>Run again the following command in your Command Line:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">shellfoundry generate</code></pre></figure>









    <div id="post-nav" class="clearfix">
        
            <a class="prev" href="/devguide/shells/modeling-the-shell.html">&laquo; Modeling Shells with TOSCA</a>
        
        
            <a class="next" href="/devguide/shells/getting-information-from-cloudshell.html">Getting Information from CloudShell &raquo;</a>
        
    </div>




<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        var disqus_identifier = '_shells/generating-shell-data-model.md';
        var disqus_url = 'https://qualisystems.github.io/shells/generating-shell-data-model.html';
        this.page.url = "https://qualisystems.github.io/devguide/shells/generating-shell-data-model.html";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = disqus_identifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//qualidev.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






<ul >
    
</ul>


<script src="/devguide/js/search.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl  : '/devguide/js/index.json',           // url for the .json file containing search index data
      results   : '#search-results',          // selector for containing search results element
      template  : '#search-results-template', // selector for Mustache.js template
      titleMsg  : '',   // message attached in front of results (can be empty)
      emptyMsg  : '<p>Nothing found.</p>'     // shown message if search returns no results
    });
  });
</script>

<script>
$(function() {
    page = $(".page-header").attr("data-page-id")
    nav_item = $(".nav li[data-page-id='"+page+"']")
    if (nav_item) {
        $(".nav").find(".active").removeClass("active");
        nav_item.addClass("active");
    }
})
</script>

                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="http://www.quali.com">CloudShell Developer Guide</a>

                </div>
            </div>
        </div>

        <script src="/devguide/js/prism.js"></script>

        
        <script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-81468206-1', 'auto');
 ga('send', 'pageview');

</script>

        
    </body>
</html>
