<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="search" type="application/opensearchdescription+xml" title="CloudShell DevGuide" href="/opensearch.xml" />
        <title>CloudShell Developer Guide : AWS Traffic Mirroring</title>
        <meta name="description" content="">
        <link rel="shortcut icon" type="image/png" href="/favicon.png?">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/prism.css">
        <link rel="stylesheet" href="/css/QualiStyle.css">
        <link rel="stylesheet" href="/css/samples.css">
        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/test-hot-block.webflow.css">


        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <script src="/js/jquery-3.1.0.min.js"></script>
        <script src="/js/modernizr.js"></script>
        <script src="/js/webflow.js"></script>
        <script src="/js/version-redirect.js"></script>

        
    </head>
    <body>
        <div id="header">
            <div class="container">
                <div class="row">
    <div class="col-md-3 col-sm-4">
        <a class="brand" href="/">
            <img alt="CloudShell Logo" src="/assets/logo.png" />
            CloudShell <small>Developer Guide</small>
        </a>
    </div>
    <div class="col-md-9 col-sm-8">
        
		  
        <form class="search" action="/search/9.3.0/search.html">
            <input class="input" id="search-query" type="text" name="q" placeholder="Search" />
            <input class="button" type="submit" value="Search"></input>
        </form>
    </div>
</div>

            </div>
        </div>
        <div class="container">
            <div class="row"> 
            	
                <!-- <div class="col-md-3"><span> Sveta </span></div> -->
                               
                
                
                    <div id="navigation" class="col-md-3 col-sm-4">
                        <span><strong>CloudShell Version: </strong></span>
                        <div id="versions">
                            <div class="form-group" onchange="versionChange(this)">
	<select class="form-control" id="version">
   
   	
		
	
	
	  <option value="9.3.0" selected>9.3.0</option>
	
	
		  
	  <option value="9.2.0">9.2.0</option>
	
	
		  
	  <option value="9.1.0">9.1.0</option>
	
	
		  
	  <option value="9.0.0">9.0.0</option>
	
	
		  
	  <option value="8.3.0">8.3.0</option>
	
	
		  
	  <option value="2020.1.0">2020.1.0</option>
	
	
	</select>
</div>
                        </div>
                        <ul class="nav nav-list" style="margin-top: -30px;">  
     
        
           <li class="nav-header"></li>
			  
           
           
        
           <li class="nav-header">Introduction</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_introduction/9.3.0/the-cloudshell-devguide.md" data-order="1"><a href="/introduction/9.3.0/the-cloudshell-devguide.html">The CloudShell DevGuide</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_introduction/9.3.0/setting-up-the-development-ide.md" data-order="2"><a href="/introduction/9.3.0/setting-up-the-development-ide.html">Setting up the Development Environment</a></li>
						
					
           
        
           <li class="nav-header">Extending cloudshell with shells</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/getting-started.md" data-order="1"><a href="/shells/9.3.0/getting-started.html">Getting Started</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/shell-driver-overview.md" data-order="2"><a href="/shells/9.3.0/shell-driver-overview.html">Shell Drivers Overview</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/the-shell-project.md" data-order="3"><a href="/shells/9.3.0/the-shell-project.html">The Shell Project Guide</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/modeling-the-shell.md" data-order="4"><a href="/shells/9.3.0/modeling-the-shell.html">Modeling Shells with TOSCA</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/generating-shell-data-model.md" data-order="5"><a href="/shells/9.3.0/generating-shell-data-model.html">Managing the Shell’s Data Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/getting-information-from-cloudshell.md" data-order="6"><a href="/shells/9.3.0/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/customizing-driver-commands.md" data-order="7"><a href="/shells/9.3.0/customizing-driver-commands.html">Commands Visibility and Usability</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/driver-deep-dive.md" data-order="8"><a href="/shells/9.3.0/driver-deep-dive.html">Driver Deep Dive</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/implementing-discovery-for-inventory-shells.md" data-order="9"><a href="/shells/9.3.0/implementing-discovery-for-inventory-shells.html">Auto-discovery for Inventory Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/discovering-inventory-snmp.md" data-order="10"><a href="/shells/9.3.0/discovering-inventory-snmp.html">Discovering Inventory using SNMP</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/debugging-shell-commands.md" data-order="11"><a href="/shells/9.3.0/debugging-shell-commands.html">Debugging Shell Driver Commands</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/deploying-to-production.md" data-order="12"><a href="/shells/9.3.0/deploying-to-production.html">Deploying to Production</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/customizing-shells.md" data-order="13"><a href="/shells/9.3.0/customizing-shells.html">Customizing Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/common-driver-recipes.md" data-order="14"><a href="/shells/9.3.0/common-driver-recipes.html">Common Driver Recipes</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/tips-and-tricks.md" data-order="15"><a href="/shells/9.3.0/tips-and-tricks.html">Tips and Tricks</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/sharing-shells-with-community.md" data-order="16"><a href="/shells/9.3.0/sharing-shells-with-community.html">Sharing a Shell with the Community</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_shells/9.3.0/1st-gen-shells.md" data-order="17"><a href="/shells/9.3.0/1st-gen-shells.html">1st Gen Shells</a></li>
						
					
           
        
           <li class="nav-header">Orchestration scripts</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/getting-started.md" data-order="1"><a href="/orchestration/9.3.0/getting-started.html">Getting Started</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/getting-information-from-cloudshell.md" data-order="2"><a href="/orchestration/9.3.0/getting-information-from-cloudshell.html">Getting Information from CloudShell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/script-commands-customization.md" data-order="6"><a href="/orchestration/9.3.0/script-commands-customization.html">Script commands Visibility and Usability</a></li>
						
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/scripts-deep-dive.md" data-order="6"><a href="/orchestration/9.3.0/scripts-deep-dive.html">Scripts Deep Dive</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/common-orchestration-recipes.md" data-order="9"><a href="/orchestration/9.3.0/common-orchestration-recipes.html">Common Orchestration Script Recipes</a></li>
						
					
           
               
			      
					               
               	
                       <li data-page-id="_orchestration/9.3.0/the-oob-orchestration.md" data-order="9"><a href="/orchestration/9.3.0/the-oob-orchestration.html">CloudShell's OOB Orchestration</a></li>
						
					
           
        
           <li class="nav-header">Configuration management</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-overview.md" data-order="1"><a href="/configmanagement/9.3.0/cf-overview.html">Overview</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-custom-scripts.md" data-order="2"><a href="/configmanagement/9.3.0/cf-custom-scripts.html">Custom Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-add-custom-script-to-app.md" data-order="3"><a href="/configmanagement/9.3.0/cf-add-custom-script-to-app.html">Adding Your Script to an App</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-custom-scripts-tips-and-tricks.md" data-order="4"><a href="/configmanagement/9.3.0/cf-custom-scripts-tips-and-tricks.html">Tips and Tricks for Custom Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-ansible.md" data-order="5"><a href="/configmanagement/9.3.0/cf-ansible.html">Ansible</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-ansible-examples.md" data-order="6"><a href="/configmanagement/9.3.0/cf-ansible-examples.html">Ansible Playbook Examples</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-add-playbook-to-app.md" data-order="7"><a href="/configmanagement/9.3.0/cf-add-playbook-to-app.html">Adding the Playbook to an App</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_configmanagement/9.3.0/cf-ansible-tips-and-tricks.md" data-order="8"><a href="/configmanagement/9.3.0/cf-ansible-tips-and-tricks.html">Tips and Tricks for Ansible Playbooks</a></li>
						
					
           
        
           <li class="nav-header">Extending cloudshell with cloud providers</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/getting-started-with-cloud-providers.md" data-order="1"><a href="/cloudproviders/9.3.0/getting-started-with-cloud-providers.html">Getting Started with Cloud Providers</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/creating-cloud-provider-shell.md" data-order="3"><a href="/cloudproviders/9.3.0/creating-cloud-provider-shell.html">Creating the Cloud Provider Shell</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/the-cloud-provider-model.md" data-order="5"><a href="/cloudproviders/9.3.0/the-cloud-provider-model.html">The Cloud Provider Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/extending-cloud-provider-shell-data-model.md" data-order="7"><a href="/cloudproviders/9.3.0/extending-cloud-provider-shell-data-model.html">Extending the Shell's Data Model</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/removing-the-address-field.md" data-order="8"><a href="/cloudproviders/9.3.0/removing-the-address-field.html">Removing the Address Field</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/configuring-deployment-paths.md" data-order="9"><a href="/cloudproviders/9.3.0/configuring-deployment-paths.html">Configuring Deployment Paths</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/controlling-app-deployment-orchestration.md" data-order="11"><a href="/cloudproviders/9.3.0/controlling-app-deployment-orchestration.html">Controlling App Deployment Orchestration</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/the-cloud-provider-interface.md" data-order="13"><a href="/cloudproviders/9.3.0/the-cloud-provider-interface.html">The Cloud Provider Interface</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/resource-discovery.md" data-order="15"><a href="/cloudproviders/9.3.0/resource-discovery.html">Resource Discovery</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/app-deployment.md" data-order="17"><a href="/cloudproviders/9.3.0/app-deployment.html">App Deployment</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/power-off-and-delete.md" data-order="19"><a href="/cloudproviders/9.3.0/power-off-and-delete.html">Power off and Delete VM</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/L2-networking-management.md" data-order="21"><a href="/cloudproviders/9.3.0/L2-networking-management.html">L2 Network Connectivity</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_cloudproviders/9.3.0/L3-networking-management.md" data-order="23"><a href="/cloudproviders/9.3.0/L3-networking-management.html">L3 Network Connectivity</a></li>
						
					
           
        
           <li class="nav-header">Cloudshell apis</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_devops/9.3.0/available-apis.md" data-order="1"><a href="/devops/9.3.0/available-apis.html">Available CloudShell APIs</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_devops/9.3.0/devops-integration.md" data-order="2"><a href="/devops/9.3.0/devops-integration.html">Automating CloudShell Sandboxes for DevOps</a></li>
						
					
           
        
           <li class="nav-header">Reference</li>
			  
           
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/python-coding-standards.md" data-order="3"><a href="/reference/9.3.0/python-coding-standards.html">Python Coding Standards</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/shellfoundry-intro.md" data-order="5"><a href="/reference/9.3.0/shellfoundry-intro.html">Shellfoundry</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					
           
               
			      
					               
               	
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/quali-shell-framework.md" data-order="7"><a href="/reference/9.3.0/quali-shell-framework.html">Quali’s Shell Framework (Python 2)</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/quali-shell-framework-python-3.md" data-order="9"><a href="/reference/9.3.0/quali-shell-framework-python-3.html">Quali’s Shell Framework (Python 3)</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/migrating_1st_gen_shells.md" data-order="10"><a href="/reference/9.3.0/migrating_1st_gen_shells.html">Converting 1st Gen Shells into 2nd Gen</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/associating-service-categories.md" data-order="11"><a href="/reference/9.3.0/associating-service-categories.html">Categories in 1st Gen Service Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/mapping-sub-resource-connections.md" data-order="12"><a href="/reference/9.3.0/mapping-sub-resource-connections.html">Mapping Connections using App Sub-resources</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/L1-switch-shell.md" data-order="13"><a href="/reference/9.3.0/L1-switch-shell.html">L1 Switch Shells</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/short-dev-videos.md" data-order="14"><a href="/reference/9.3.0/short-dev-videos.html">Short Development Videos</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/resource-scripts.md" data-order="15"><a href="/reference/9.3.0/resource-scripts.html">Resource Scripts</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/defining-Azure-custom-routing.md" data-order="17"><a href="/reference/9.3.0/defining-Azure-custom-routing.html">Custom Routing for Azure Apps</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/working-with-sandbox-metadata.md" data-order="19"><a href="/reference/9.3.0/working-with-sandbox-metadata.html">Custom Sandbox Metadata</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/creating-static-vm.md" data-order="21"><a href="/reference/9.3.0/creating-static-vm.html">Shells that Load a Static VM</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/intellisense-with-docstrings.md" data-order="23"><a href="/reference/9.3.0/intellisense-with-docstrings.html">Intellisense in Shells and Scripts (using Docstrings)</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/aws-traffic-mirroring.md" data-order="25"><a href="/reference/9.3.0/aws-traffic-mirroring.html">AWS Traffic Mirroring</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/common-cloudshell-packages.md" data-order="27"><a href="/reference/9.3.0/common-cloudshell-packages.html">Common CloudShell Packages</a></li>
						
					
           
               
			      
					               
               	
					
           
               
			      
					               
               	
                       <li data-page-id="_reference/9.3.0/migrating-shells-to-python-3.md" data-order="29"><a href="/reference/9.3.0/migrating-shells-to-python-3.html">Migrating Shells to Python 3</a></li>
						
					
           
        
</ul>

                    </div>

                    <div id="content" class="col-md-9 col-sm-8">
                        

<div class="page-header" data-page-id="_reference/9.3.0/aws-traffic-mirroring.md">
    <h2>AWS Traffic Mirroring
        
        
          
        
    </h2>
</div>

<p>This article explains how to copy network traffic running through a deployed AWS App to another App. For additional information about traffic mirroring, see AWS Documentation.</p>

<p>This is done by calling two hidden commands on the AWS cloud provider via the CloudShell Automation API:</p>
<ul>
  <li><code>CreateTrafficMirroring</code>: Deploys traffic mirror sessions, traffic targets and filters, and associates them with the sandbox VPC</li>
  <li><code>RemoveTrafficMirroring</code>: Tears down traffic mirroring sessions and related AWS resources.</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Source EC2 instance must be a Nitro-based instance.</li>
  <li>Target EC2 instance must have UDP port 4789 opened for traffic from the source instance. You can do this via the <code>Set AppSecurityGroups</code> API method, setting the target instance to accept all sandbox traffic or using the <strong>Inbound Ports</strong> attribute on the App template.</li>
  <li>Source and target NICs are required for the <code>CreateTrafficMirroring</code> call. Starting with <em>cloudshell-cp-aws</em> versions 2.4.3.x, NIC has been added to VM Details, to facilitate calling the resource command.</li>
</ul>

<h2 id="limitations">Limitations</h2>

<ul>
  <li>A source network interface may be tapped up to 3 sessions.</li>
  <li>A target may have open sessions with up to 10 different sources (some dedicated instance types can have more).</li>
</ul>

<p>For details, see this AWS Documentation page: <a href="https://docs.aws.amazon.com/vpc/latest/mirroring/traffic-mirroring-considerations.html" target="_blank">Traffic Mirroring Limits and Considerations</a>.</p>

<h2 id="command-interface">Command interface</h2>

<p>Mandatory parameters are indicated.</p>

<h3 id="createtrafficmirroring">CreateTrafficMirroring</h3>

<ul>
  <li><strong>DriverRequest</strong>:
    <ul>
      <li><strong>Actions</strong>: List containing the following:
        <ul>
          <li><strong>actionId</strong>: (Str)</li>
          <li><strong>type</strong>: (Mandatory, Str) Must be “CreateTrafficMirroring”</li>
          <li><strong>actionParams</strong>: List containing the following:
            <ul>
              <li><strong>type</strong>: (Mandatory, Str) Must be “CreateTrafficMirroringParams”</li>
              <li><strong>sourceNicId</strong>: (Mandatory, Str) Network interface ID of the source EC2 instance</li>
              <li><strong>targetNicId</strong>: (Mandatory, Str) Network interface ID of the target EC2 instance (the traffic mirror target)</li>
              <li><strong>sessionNumber</strong>: (Str) Traffic mirror session number that determines the order in which sessions are evaluated when an interface is used by multiple sessions (smallest number takes priority). Every traffic mirror session requires one. If left empty, CloudShell will allocate a number.</li>
              <li><strong>filterRules</strong>: List of the following:
                <ul>
                  <li><strong>type</strong>: (Mandatory, Str) Must be “TrafficFilterRule”</li>
                  <li><strong>direction</strong>: (Mandatory, Str) Defines the traffic direction on the source NIC. Valid values are <strong>ingress</strong> (inbound) and <strong>egress</strong> (outbound)</li>
                  <li><strong>sourcePortRange</strong>: (Type) Port range (<strong>fromPort</strong> and <strong>toPort</strong>) of the source EC2 instance (from which the traffic is sent).</li>
                  <li><strong>destinationPortRange</strong>: (Type) Port range (<strong>fromPort</strong> and <strong>toPort</strong>) of the target EC2 instance (to which the traffic is sent).</li>
                  <li><strong>protocol</strong>: (Mandatory, Str) Port protocol (tcp, udp, etc.)</li>
                  <li><strong>sourceCidr</strong>: (Str) CIDR of the source EC2 instance (from which the traffic is sent)</li>
                  <li><strong>destinationCidr</strong>: (Str) CIDR of the target EC2 instance (to which the traffic is sent)</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="removetrafficmirroring">RemoveTrafficMirroring</h3>

<ul>
  <li><strong>DriverRequest</strong>:
    <ul>
      <li><strong>Actions</strong>: List containing the following:
        <ul>
          <li><strong>actionId</strong>: (Str)</li>
          <li><strong>type</strong>: (Mandatory, Str) Must be “RemoveTrafficMirroring”</li>
          <li><strong>targetNicId</strong>: (Mandatory, Str) Network interface ID of the target EC2 instance (the traffic mirror target)</li>
          <li><strong>sessionId</strong>: (Mandatory, Str) Traffic mirror session ID (this ID is automatically assigned by AWS and returned in the <em>CreateTrafficMirroring</em> output).</li>
        </ul>

        <p><strong>Notes:</strong></p>
        <ul>
          <li>Make sure to include both the <code>sessionId</code> and <code>TargetNicId</code> parameters, but provide a value only for one of them, as illustrated in the <a href="#removetrafficmirroring-1">RemoveTrafficMirroring</a> example.</li>
          <li>You cannot use the <code>sourceNic</code> parameter to remove traffic mirroring sessions.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="examples">Examples</h2>

<h4 id="using-reservationid-to-get-nics">Using <code>reservationId</code> to get NICs</h4>

<p>If the EC2 instance has a single NIC:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">reservation = session.GetReservationDetails(&#39;b9818bde-fc86-49f2-beae-74e238a3ad07&#39;).ReservationDescription

resource_interface = next(next(p.Value for p in r.VmDetails.NetworkData[0].AdditionalData if p.Name==&#39;nic&#39;) for r in reservation.Resources if &#39;resource_name&#39; in r.Name)</code></pre></figure>

<p>If the EC2 instance has more than one NICs:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python">from cloudshell.api.cloudshell_api import CloudShellAPISession


session = CloudShellAPISession(&#39;localhost&#39;, &quot;admin&quot;, &quot;admin&quot;, &quot;Global&quot;)
reservation = session.GetReservationDetails(&#39;b9818bde-fc86-49f2-beae-74e238a3ad07&#39;).ReservationDescription

for resource in reservation.Resources:
    if resource.VmDetails and len(resource.VmDetails.NetworkData)&gt;0:
        for network_data in resource.VmDetails.NetworkData:
            for additional_data in network_data.AdditionalData:
                if additional_data.Name==&quot;nic&quot;:
                    nic = additional_data.Value</code></pre></figure>

<h4 id="createtrafficmirroring-1">CreateTrafficMirroring</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python">import cloudshell.api.cloudshell_api as api

session = api.CloudShellAPISession(&#39;localhost&#39;, &#39;admin&#39;, &#39;admin&#39;, &#39;Global&#39;)

result = session.ExecuteCommand(reservationId=&#39;9a8e81ac-5dd1-483a-9937-c17e477f455d&#39;,
                                targetName=&#39;AWS&#39;,
                                targetType=&#39;Resource&#39;,
                                commandName=&#39;CreateTrafficMirroring&#39;,
                                commandInputs=[api.InputNameValue(Name=&#39;request&#39;, Value=&#39;&#39;&#39;
                                {
                                     &quot;driverRequest&quot;: {
                                                         &quot;actions&quot;: [
                                                                         {
                                                                             &quot;actionId&quot;: &quot;41f206a1-a6c0-4603-90f7-6492cd0fb00d&quot;,
                                                                             &quot;type&quot;: &quot;CreateTrafficMirroring&quot;,
                                                                             &quot;actionParams&quot;: {&quot;type&quot;: &quot;CreateTrafficMirroringParams&quot;,
                                                                                              &quot;sourceNicId&quot;: &quot;eni-008322622e675cd80&quot;,
                                                                                              &quot;targetNicId&quot;: &quot;eni-05fc8d0b34b762305&quot;,
                                                                                              &quot;sessionNumber&quot;: &quot;5&quot;,
                                                                                              &quot;filterRules&quot;: [{&quot;type&quot;: &quot;TrafficFilterRule&quot;,
                                                                                                               &quot;direction&quot;: &quot;ingress&quot;,
                                                                                                               &quot;protocol&quot;: &quot;tcp&quot;,
                                                                                                               &quot;sourcePortRange&quot;: {&quot;type&quot;: &quot;PortRange&quot;, &quot;fromPort&quot;: &quot;50000&quot;, &quot;toPort&quot;: &quot;65535&quot;},
                                                                                                               &quot;sourceCidr&quot;: &quot;192.168.0.124/24&quot;
                                                                                                             }]
                                                                                              }
                                                                         }
                                                                     ]
                                                      }
                                }
                                &#39;&#39;&#39;)]
                                )
print result.Output</code></pre></figure>

<h4 id="removetrafficmirroring-1">RemoveTrafficMirroring</h4>

<figure class="highlight"><pre><code class="language-python" data-lang="python">import cloudshell.api.cloudshell_api as api

session = api.CloudShellAPISession(&#39;localhost&#39;, &#39;admin&#39;, &#39;admin&#39;, &#39;Global&#39;)

result = session.ExecuteCommand(reservationId=&#39;514d18dc-cd6c-4725-ac60-9e281d0b8e27&#39;,
                                targetName=&#39;AWS&#39;,
                                targetType=&#39;Resource&#39;,
                                commandName=&#39;RemoveTrafficMirroring&#39;,
                                commandInputs=[api.InputNameValue(Name=&#39;request&#39;, Value=&#39;&#39;&#39;
                                         {
                                             &quot;driverRequest&quot;: {
                                                                 &quot;actions&quot;: [
                                                                                 {
                                                                                     &quot;actionId&quot;: &quot;514d18dc-cd6c-4725-ac60-9e281d0b8e27&quot;,
                                                                                     &quot;type&quot;: &quot;RemoveTrafficMirroring&quot;,
                                                                                     &quot;sessionId&quot;: &quot;&quot;,
                                                                                     &quot;targetNicId&quot;: &quot;eni-08e44d9a954444e3f&quot;
                                                                                 }
                                                                             ]
                                                               }
                                         }
                                         &#39;&#39;&#39;)]
                                )
print result.Output</code></pre></figure>








    <div id="post-nav" class="clearfix">
        
            <a class="prev" href="/reference/9.3.0/intellisense-with-docstrings.html">&laquo; Intellisense in Shells and Scripts (using Docstrings)</a>
        
        
            <a class="next" href="/reference/9.3.0/common-cloudshell-packages.html">Common CloudShell Packages &raquo;</a>
        
    </div>




<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        var disqus_identifier = '_reference/9.3.0/aws-traffic-mirroring.md';
        var disqus_url = 'https://devguide.quali.com/reference/9.3.0/aws-traffic-mirroring.html';
        this.page.url = "https://devguide.quali.com/reference/9.3.0/aws-traffic-mirroring.html";  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = disqus_identifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//qualidev.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>






<ul >
    
</ul>


<script src="/js/search.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl  : '/js/index.json',           // url for the .json file containing search index data
      results   : '#search-results',          // selector for containing search results element
      template  : '#search-results-template', // selector for Mustache.js template
      titleMsg  : '',   // message attached in front of results (can be empty)
      emptyMsg  : '<p>Nothing found.</p>'     // shown message if search returns no results
    });
  });
</script>

<script>
$(function() {
    page = $(".page-header").attr("data-page-id")
    nav_item = $(".nav li[data-page-id='"+page+"']")
    if (nav_item) {
        $(".nav").find(".active").removeClass("active");
        nav_item.addClass("active");
    }
})
</script>

                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    
<div class="qs-control-container scroll-enable">
	<a href="https://github.com/QualiSystems/devguide_source/issues/new?title=New%20suggestion%20for%20/reference/9.3.0/aws-traffic-mirroring.html" target="_blank" class="qs-btn-round qs-btn-mail" title="Send feedback">
	</a>

	<button class="qs-btn-round qs-btn-scroll-top tooltip tooltipstered">
	</button>
</div>


Documentation for <a href="http://www.quali.com">CloudShell Developer Guide</a>

                </div>
            </div>
        </div>

        <script src="/js/prism.js"></script>
        
        <script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-81468206-1', 'auto');
 ga('send', 'pageview');

</script>

        
    </body>

</html>
